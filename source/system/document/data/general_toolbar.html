<scope class="main" export="move_action set_control"   style="width:100%;height:100%" element="div" >
	
	top: ((widget.x))
	top: ((widget.y))
	width: ((widget.width))
	height: ((widget.Height))

	(( css_selectors ))<br/>

	<input type="text" pin="css_value">
	<button onclick=((add_css_value))>submit</button>

	<textarea value=((component_info)(changed))></textarea>

	<script on=((changed))>
		env.ui.comp.active.component.scope.ast.reparse(changed);
	</script>


	<script on=((add_css_value))>
		
		const value = css_value$.value;
		const component = env.ui.comp.active.component;
		const element = env.ui.comp.active.element;

		if(component && element)
			actions.SETCSSPROP(env, component, element, value);		

	</script>



	<container>
		((css_names))
		<scope import="env" element=div>
			((name))
			((css_out))

			<script on=((loading))  >

				const component = env.ui.comp.active.component;
				const element = env.ui.comp.active.element;

				const cs = component.local_css[0];

				for(const prop of cs.getApplicableProperties(element, component)){

					if(prop.name == name){

						let ele = document.createElement("div");

						this.ui = css.ui(prop);

						this.ui.mount(ele);

						css_out = ele;

						break;
					}
				}

			</script>
		</scope>
	</container>

	<container>
		((documents))
		<scope onclick=((add_to_main))>
			<h4 draggable=true ondragstart=((start))>((name))</h4>
			<script on=((add_to_main))>
				actions.CREATE_COMPONENT(env, this.model, 150, 150)
			</script>
		</scope>
	</container>
	
	<div class="cfw_css">
		((css_out))<br/>
	</div>

	<span pin=css></span>

	<script on=((widget))>

		component_info = env.ui.comp.active.component.scope.ast.toString();

		const docs = env.data.docs;
		let d = [];
		
		for(const doc of docs.docs.values()){
			d.push(doc)
		}

		documents = d;
		
		const component = env.ui.comp.active.component;
		const element = env.ui.comp.active.element;

		if(element !== this.element && component.local_css && component.local_css[0]){
			
			const cs = component.local_css[0];

			if(this.ui){
				this.ui.destroy();
			}

			const stylesheet = new css.stylesheet();
			
			([...cs.getApplicableSelectors(element)].map(m => stylesheet.ruleset.rules.push(m.parent) ));

			this.ui = css.ui(stylesheet);

			this.ui.update();

			const ele = document.createElement("div");

			this.ui.mount(ele);

			css_out = ele;
			css_names = [{name:"top"},{name:"left"}];
		}

		this.element = element;
	</script>

	<style>
		.main{
			position: relative;
			top:0;
			left:0;
			background-color: white;
			width:160px;
			min-height: 300px;
		}
	</style>
</scope>


